{% extends 'base.html' %}

{% block title %}Order: {{ order.pk }}{% endblock %}

{% block content %}
<section>
    <div class="product">
        <div class="description">
            {% for item in order.items %}
            {% include "components/item_body.html" %}
            <p>Quantity: {{ item.quantity }}</p>
            {% endfor %}
        </div>
    </div>
    <button type="button" id="checkout-button">Checkout</button>
    <hr />
    {% include "components/payment_intent.html" %}
</section>
{% csrf_token %}
{% endblock %}
{% block script %}
<script type="text/javascript">
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    // Create an instance of the Stripe object with your publishable API key
    const stripe = Stripe("{{ stripe_api_key }}");
  
    const session_url = "{% url 'create_session_order' order.pk %}"
    const intent_url = "{% url 'create_payment_order' order.pk %}"
    const item_data = {
    }
  </script>
  <script src='/static/js/intent_item.js' type="text/javascript"></script>
  <script src='/static/js/session_item.js' type="text/javascript"></script>
{% endblock %}
